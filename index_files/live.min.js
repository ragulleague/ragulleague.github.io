!function(a,b){b.Deltatre=b.Deltatre||{};var c=b.Deltatre;c.getRefreshRate=function(a){if(a&&(a.MatchDate||a.dateTime)){var b;b=a.MatchDate?parseInt(a.MatchDate.replace(/\/Date\((\d+)\)\//g,"$1")):a.dateTime.replace(" ","");var c=new Date(b),d=new Date(b),e=new Date,f=new Date;if(d.setHours(0,0,0,0),f.setHours(0,0,0,0),d==f)return 12e4;var g=new Date(c),h=new Date(c);if(g.setHours(g.getHours()+4),h.setHours(h.getHours()-2),3==a.Status||3==a.status||g>e&&e>h)return 5e3}return 12e4}}(jQuery,window),function(a,b){var c=b.Deltatre||{},d=null,e=function(){this.pollers={}};e.prototype.clear=function(){this.pollers={}},e.prototype.on=function(a,b,c,d,e){if(!a)throw new Error("url must not be null");if(!d)throw new Error("handler must not be null");var g=arguments.length>3?Array.prototype.splice.apply(arguments,[3,arguments.length-1]):[];if(a in this.pollers)this.pollers[a].interval>c&&this.pollers[a].changeInterval(c);else{var h=new f;this.pollers[a]=h.startPolling(a,b,c)}this.pollers[a].listeners.push({context:e,callback:d,args:g})},e.prototype.removeEventListener=function(a,b,c){if(!a)throw new Error("url must not be null");if(!b)throw new Error("handler must not be null");_.isUndefined(this.pollers[a])||_.isUndefined(this.pollers[a].listeners)||(this.pollers[a].listeners=_(this.pollers[a].listeners).filter(function(a){return a.context!==c&&a.callback!==b}),(_.isUndefined(this.pollers[a].listeners)||0===this.pollers[a].listeners.length)&&(this.pollers[a]=_(this.pollers[a]).filter(function(b,c){return c!==a})))},e.prototype.dispatch=function(a){if(_.isUndefined(this.pollers[a]))return!1;var b=Array.prototype.slice.call(arguments);return b=b.length>1?b.splice(1,b.length-1):[],_(this.pollers[a].listeners).each(function(a){a.callback.apply(a.context,b)}),!0};var f=function(){this.interval=null,this.listeners=[],this.handler=null,this.puller=null};f.prototype.startPolling=function(b,c,e){this.interval=e;var f,g="";return this.puller=function(){f&&4!==f.readyState&&f.abort(),f=a.ajax({url:b,ifModified:!0,beforeSend:function(a){a.setRequestHeader("Authorization",c),a.setRequestHeader("If-None-Match",g)}}),f.done(function(a,c,e){g=e.getResponseHeader("ETag")||"","success"==c&&a&&d.dispatch(b,a)})},this.puller(),this.handler=setInterval(this.puller,this.interval),this},f.prototype.changeInterval=function(a){this.interval=a,clearInterval(this.handler),this.handler=setInterval(this.puller,this.interval)},c.livepolling=function(){var a=function(){d=d||new e};this.on=function(a,b,c,e,f){d.on(a,b,c,e,f)},this.off=function(a,b,c){d.removeEventListener(a,b,c)},a()}}(jQuery,window),function(a,b,c){"use strict";var d=c.Deltatre,e=d.plugins,f={interval:1e4,daas:"http://daas.stg.euro2016.infra.uefa.com/",daasApiKey:"SportDataLayer key=D05BD07B-8B07-414E-AF74-CF30B9926BE6",mainObject:""};e.livepolling=function(b,e){var g,h=(a(c),a.extend(!0,{},f,e||{})),i=b,j={},k=this;k.init=function(){var a=h.daas+h.url;d.livepolling&&(g=new d.livepolling,h.matchentity&&(h.interval=d.getRefreshRate(h.matchentity)),g.on(a,h.daasApiKey,h.interval,function(a){k.updateModel(a)},i))};var l=!0;k.updateModel=function(a){""!=h.mainObject&&a[h.mainObject]&&(a=a[h.mainObject]),l&&(j=ko.observable(a),ko.applyBindings(j,i[0]),l=!1),j(a)}}}(jQuery,_,window),function(a,b,c){"use strict";var d=c.Deltatre,e=d.plugins,f={daas:"http://daas.stg.euro2016.infra.uefa.com/",daasApiKey:"SportDataLayer key=D05BD07B-8B07-414E-AF74-CF30B9926BE6",matchId:null,lang:"en",alwayspoll:!1,todayFeed:!1,interval:5e3};e.matchlive=function(e,g){var h,i,j,k,l,m,n,o,p,q=a(c),r=a.extend(!0,{},f,g||{}),s=e,t={},u={MATCH_FULL_TIME:0,MATCH_TBP:1,MATCH_LIVE:3,MATCH_SUSPENDED:4,MATCH_POSTPONED:7,MATCH_CANCELLED:8},v=b.template('<div class="scorer"><a href="#"><%= playerWebName %> <%= goals.join(", ") %></a></div>'),w=b.template('<div class="time"><%= time %></div><div class="comment"><%= comment %></div>'),x={};this.init=function(){(r.matchentity||d.livepolling)&&(j=new d.livepolling,p=new d.Translator,r.interval=r.alwayspoll?r.interval:d.getRefreshRate(r.matchentity),h=r.daas+"/api/v2/football/"+r.lang,r.todayFeed?h+="/competitions/"+r.matchentity.IdCup+"/seasons/"+r.matchentity.IdCupSeason+"/matches/today":(t.lastComment=s.find(".js-last-comment"),t.followBtn=a(".top-match-live .js-follow-btn"),h+="/matches/"+r.matchId),j.on(h,r.daasApiKey,r.interval,i,s))},i=function(a){var c=null;c=r.todayFeed?b(a.matchInfoItems).find(function(a){return a.idMatch==r.matchId}):a.match,c&&k(c.status,c)},l=function(c){var d=s.find(".js-match--minute");if(c.minute>0){var e=c.minute;c.minuteextra>0&&(e+="+"+c.minuteextra),d.html(e)}s.find(".js-team--home-score").html(c.results.homeGoals),s.find(".js-team--away-score").html(c.results.awayGoals),c.results.reasonWin>1&&s.find(".match-row_match-status").html(c.results.reasonWinPhrase);var f=["2","5","7","9","H","P","F","A"];if(c.matchPhaseDetailedCode&&f.indexOf(""+c.matchPhaseDetailedCode)>-1&&("P"===c.matchPhaseDetailedCode?d.html((e?e:"")+"<p>"+c.matchPhaseDetailed+"</p>"):d.html(c.matchPhaseDetailed)),t.lastComment&&t.lastComment.length>0&&c.lastComment){var g={time:"MatchEvents"===c.lastComment.datasource&&""!==c.lastComment.data.MinuteFrontEnd?c.lastComment.data.MinuteFrontEnd:o(new Date(c.lastComment.date)),comment:null};switch(c.lastComment.datasource){case"MatchEvents":g.comment=c.lastComment.data.TranslatedEvent;break;case"Tumblr":g.comment=c.lastComment.data.Body;break;default:g.comment=c.lastComment.data.Text}g.comment.length>135&&(g.comment=g.comment.substr(0,132)+"..."),t.lastComment.html(w(g))}if(t.followBtn&&t.followBtn.length>0&&(c.status===u.MATCH_LIVE?t.followBtn.show():t.followBtn.hide()),q.trigger("matchlive"),b.isObject(c.results.scorers)){var h=[{container:".js-home-team--scorers",selector:"homeGoals"},{container:".js-away-team--scorers",selector:"awayGoals"}];h.forEach(function(d){var e=s.find(d.container);a(e).empty(),b.chain(c.results.scorers[d.selector]).groupBy(function(a){return a.playerWebName}).sortBy(function(a){return a[0].minute}).each(function(c){var d=b(c).first();if(d.playerWebName){var f=[];b(c).each(function(a){var b=a.minute;a.minuteExtra&&a.minuteExtra>0&&(b+="+"+a.minuteExtra),null!==a.eventsubcode&&(b+=" ("+a.eventsubcode+")"),a.phase>2&&(b+=" ET"),f.push(b)});var g={playerWebName:d.playerWebName,goals:f},h=v(g);a(h).appendTo(e)}})})}},m=function(){j&&j.off(h,i,s),q.trigger("matchpause")},n=function(a){var b=s.find(".js-match--minute");"N"!=a.lineup&&p.getText("Line-ups").then(function(a){b.html(a)})},k=function(a,b){r.alwayspoll?l(b):a in x&&x[a](b),s.attr("data-status",a)},o=function(a){var b=a.getHours();b=10>b?"0"+b:b;var c=a.getMinutes();return c=10>c?"0"+c:c,b+":"+c},x[u.MATCH_TBP]=n,x[u.MATCH_LIVE]=l,x[u.MATCH_CANCELLED]=m,x[u.MATCH_FULL_TIME]=function(a){l(a),m(a)},x[u.MATCH_POSTPONED]=m,x[u.MATCH_SUSPENDED]=m}}(jQuery,_,window);
//# sourceMappingURL=live.min.js.map